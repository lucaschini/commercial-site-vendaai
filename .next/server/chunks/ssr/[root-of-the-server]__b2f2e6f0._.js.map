{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///E:/Dev/commercial-site-vendaai/src/lib/api.ts"],"sourcesContent":["// lib/api.ts\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\n\ninterface LoginData {\n  email: string;\n  password: string;\n}\n\ninterface RegisterData {\n  email: string;\n  username: string;\n  password: string;\n}\n\ninterface AuthResponse {\n  access_token: string;\n  token_type: string;\n  user: {\n    id: number;\n    email: string;\n    username: string;\n    is_active: boolean;\n  };\n}\n\n// Salvar token no localStorage\nexport const setToken = (token: string) => {\n  if (typeof window !== \"undefined\") {\n    localStorage.setItem(\"token\", token);\n  }\n};\n\n// Obter token do localStorage\nexport const getToken = (): string | null => {\n  if (typeof window !== \"undefined\") {\n    return localStorage.getItem(\"token\");\n  }\n  return null;\n};\n\n// Remover token\nexport const removeToken = () => {\n  if (typeof window !== \"undefined\") {\n    localStorage.removeItem(\"token\");\n  }\n};\n\n// Login\nexport const login = async (data: LoginData): Promise<AuthResponse> => {\n  console.log(\"üîµ Iniciando login...\");\n\n  const response = await fetch(`${API_URL}/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    console.error(\"‚ùå Erro no login:\", error);\n    throw new Error(error.detail || \"Erro ao fazer login\");\n  }\n\n  const result = await response.json();\n  console.log(\"‚úÖ Login bem-sucedido, salvando token...\");\n  setToken(result.access_token);\n\n  // Verificar se token foi salvo\n  const savedToken = getToken();\n  console.log(\"üîç Token salvo?\", savedToken ? \"Sim\" : \"N√£o\");\n  console.log(result.access_token);\n  console.log(\"üë§ Usu√°rio:\", result.user);\n\n  return result;\n};\n\n// Registro\nexport const register = async (data: RegisterData): Promise<AuthResponse> => {\n  const response = await fetch(`${API_URL}/auth/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.detail || \"Erro ao fazer registro\");\n  }\n\n  const result = await response.json();\n  setToken(result.access_token);\n  return result;\n};\n\n// Obter dados do usu√°rio\nexport const getMe = async () => {\n  const token = getToken();\n\n  if (!token) {\n    throw new Error(\"Token n√£o encontrado\");\n  }\n\n  const response = await fetch(`${API_URL}/auth/me`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n  if (!response.ok) {\n    if (response.status === 401) {\n      removeToken();\n      throw new Error(\"Sess√£o expirada\");\n    }\n    throw new Error(\"Erro ao buscar dados do usu√°rio\");\n  }\n\n  return response.json();\n};\n\n// Obter dados do dashboard\nexport const getDashboard = async () => {\n  const token = getToken();\n\n  if (!token) {\n    throw new Error(\"Token n√£o encontrado\");\n  }\n\n  const response = await fetch(`${API_URL}/user/dashboard`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n  if (!response.ok) {\n    if (response.status === 401) {\n      removeToken();\n      throw new Error(\"Sess√£o expirada\");\n    }\n    throw new Error(\"Erro ao buscar dashboard\");\n  }\n\n  return response.json();\n};\n\n// Logout\nexport const logout = () => {\n  removeToken();\n};\n"],"names":[],"mappings":"AAAA,aAAa;;;;;;;;;;;;;;;;;;;AACb,MAAM,UAAU,6DAAmC;AAyB5C,MAAM,WAAW,CAAC;IACvB;;AAGF;AAGO,MAAM,WAAW;IACtB;;IAGA,OAAO;AACT;AAGO,MAAM,cAAc;IACzB;;AAGF;AAGO,MAAM,QAAQ,OAAO;IAC1B,QAAQ,GAAG,CAAC;IAEZ,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,WAAW,CAAC,EAAE;QACpD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,QAAQ,KAAK,CAAC,oBAAoB;QAClC,MAAM,IAAI,MAAM,MAAM,MAAM,IAAI;IAClC;IAEA,MAAM,SAAS,MAAM,SAAS,IAAI;IAClC,QAAQ,GAAG,CAAC;IACZ,SAAS,OAAO,YAAY;IAE5B,+BAA+B;IAC/B,MAAM,aAAa;IACnB,QAAQ,GAAG,CAAC,mBAAmB,aAAa,QAAQ;IACpD,QAAQ,GAAG,CAAC,OAAO,YAAY;IAC/B,QAAQ,GAAG,CAAC,eAAe,OAAO,IAAI;IAEtC,OAAO;AACT;AAGO,MAAM,WAAW,OAAO;IAC7B,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,cAAc,CAAC,EAAE;QACvD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,MAAM,IAAI,MAAM,MAAM,MAAM,IAAI;IAClC;IAEA,MAAM,SAAS,MAAM,SAAS,IAAI;IAClC,SAAS,OAAO,YAAY;IAC5B,OAAO;AACT;AAGO,MAAM,QAAQ;IACnB,MAAM,QAAQ;IAEd,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,QAAQ,CAAC,EAAE;QACjD,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B;YACA,MAAM,IAAI,MAAM;QAClB;QACA,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,eAAe;IAC1B,MAAM,QAAQ;IAEd,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,eAAe,CAAC,EAAE;QACxD,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B;YACA,MAAM,IAAI,MAAM;QAClB;QACA,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,SAAS;IACpB;AACF","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///E:/Dev/commercial-site-vendaai/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  ReactNode,\n} from \"react\";\nimport { getMe, logout as logoutApi, getToken } from \"@/lib/api\";\n\ninterface User {\n  id: number;\n  email: string;\n  username: string;\n  is_active: boolean;\n  custom_text?: string;\n  created_at: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  isAuthenticated: boolean;\n  login: (user: User) => void;\n  logout: () => void;\n  refreshUser: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      const token = getToken();\n\n      if (!token) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const userData = await getMe();\n        setUser(userData);\n        setIsAuthenticated(true);\n      } catch (error) {\n        console.error(\"Erro ao verificar autentica√ß√£o:\", error);\n        setIsAuthenticated(false);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  const login = (userData: User) => {\n    setUser(userData);\n    setIsAuthenticated(true);\n  };\n\n  const logout = () => {\n    logoutApi();\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n\n  const refreshUser = async () => {\n    try {\n      const userData = await getMe();\n      setUser(userData);\n    } catch (error) {\n      console.error(\"Erro ao atualizar usu√°rio:\", error);\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        loading,\n        isAuthenticated,\n        login,\n        logout,\n        refreshUser,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth deve ser usado dentro de AuthProvider\");\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAOA;AATA;;;;AA6BA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IAEvD,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,QAAQ,IAAA,6HAAQ;YAEtB,IAAI,CAAC,OAAO;gBACV,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,MAAM,WAAW,MAAM,IAAA,0HAAK;gBAC5B,QAAQ;gBACR,mBAAmB;YACrB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mCAAmC;gBACjD,mBAAmB;YACrB,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC;QACb,QAAQ;QACR,mBAAmB;IACrB;IAEA,MAAM,SAAS;QACb,IAAA,2HAAS;QACT,QAAQ;QACR,mBAAmB;IACrB;IAEA,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,0HAAK;YAC5B,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///E:/Dev/commercial-site-vendaai/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///E:/Dev/commercial-site-vendaai/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file:///E:/Dev/commercial-site-vendaai/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}